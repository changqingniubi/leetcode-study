## 堆

1. 树结构深入理解

   节点： 集合。 边：关系

   完全二叉树： 

   ​	父子节点的编号存在可计算的关系 因此不需要存储边的信息

   ​	可以用连续空间存储

   数据结构两层含义： 

   ​	写程序时：数组

   ​	我们看成：树形结构

   ​	思维结构 和 存储结构。

2. 数据结构

   1. 百科： 堆（heap）是计算机科学中一类特殊的数据结构的统称。堆通常是一个可以被看做一棵树的数组对象。

   2. 基于完全二叉树的一种数据结构。

   3. 将根结点最大的堆叫做最大堆或大根堆，根结点最小的堆叫做最小堆或小根堆。

      对于任意的三元组：

      ​	大顶堆： 父节点都大于两个子节点

      ​	小顶堆：父节点都小于两个子节点

      思考： 对于小顶堆

      ​		最大值在哪？ 

      ​		第二大的值： 1，2层

      ​		第三大的值：1，2，3层 

      ​	兄弟之间没有明确大小关系！只有父节点确定大于它。

   4. **注意：**你可以使用普通树来模拟堆，但是那对空间是极大的浪费。

   

3. 性质

   堆总是满足下列性质： 

   - 堆中某个结点的值总是不大于或不小于其父结点的值；
   - 堆总是一棵完全二叉树。

   ```go
   parent(i) = Math.floor((i - 1)/2)
   left(i)   = 2i + 1
   right(i)  = 2i + 2
   ```

   + 堆属性适用于每一个节点，因为父节点总是比它的子节点小。

   + **注意：**并不是每一个最小顶堆都是一个有序数组！要将堆转换成有序数组，需要使用堆排序。

4. 操作

   小顶堆：

   + 尾部插入（向下调整）

     1. 尾部插入元素

     2. 如果大于父节点，就和父节点交换位置

   + 头部弹出 （向上调整）

     1. 头部弹出元素

     2. 用尾元素填充头部位置。

        （堆是一颗完全二叉树，中间不可以断，且弹出后尾部元素下标超界）

     3. 如果此元素大于子元素，就和子元素交换位置

     shiftUp 或者 shiftDown 是一个递归的过程，所以它的时间复杂度是 **O(log n)**。

   + 堆排序

     1. 将堆顶元素与队尾元素交换
     2. 将此操作看做是堆顶元素弹出操作
     3. 按照头部弹出以后的策略调整堆

     操作后尾部元素不属于堆的合法位置，但是属于数组的有效空间。

     练习： 堆一次和三次弹出后的结果

5. 堆与优先队列

   和普通队列的性质对比： 

   1. 尾部入队  尾部插入
   2. 头部出队  头部弹出
   3. 先进先出  权大先出
   4. 数组实现  数组实现（逻辑上看成堆 / 树）

   所以把堆叫做队列，但又不是普通队列。

   堆是优先队列的一种实现方式，优先队列还可使用链表实现

6. 应用

   堆适合维护集合的最值问题！！

   

7. 实现

数据结构： 

​	结构定义 + 结构操作

​	定义一种性质，并且维护这种性质

### 算法题

##### 随堂讲解



##### 作业

1. 封装 - 根据传惨返回大顶堆或者小顶堆的类
2. 剑指 **Offer 40.** 最⼩的**k**个数
3. **1046.** 最后⼀块⽯头的重量
4. **703.** 数据流中的第 **K** ⼤元素
5. **373.** 查找和最⼩的**K**对数字
6. **215.** 数组中的第**K**个最⼤元素

##### 延伸

1. **692.** 前**K**个⾼频单词
2. **1801.** **积压订单中的订单总数**
3. **1753.** **移除石子的最大得分**
4. **264.** **丑数** **II**

